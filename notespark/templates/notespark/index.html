{% extends 'notespark/base.html' %}

{% block head %}
<meta property="og:title" content="NoteSpark - Secure, Offline-First Markdown App">
<meta property="og:description" content="Markdown support, offline-first, secure vault, JSON import/export. Fast downloads. GPLv3.">
<meta property="og:url" content="https://notespark.lusansapkota.com.np/">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "NoteSpark",
  "operatingSystem": "Windows, macOS, Linux, Web",
  "applicationCategory": "Note-taking",
  "offers": {
    "priceCurrency": "USD"
  },
  "featureList": ["Markdown support", "Offline-first", "Secure vault (coming soon)", "JSON import/export"]
}
</script>
{% endblock %}

{% block header %}
<!-- Hero Section - 100vh -->
<section class="container-fluid d-flex flex-column justify-content-center align-items-center text-center min-vh-100 hero-section-home position-relative">
  <div class="floating-shapes position-absolute w-100 h-100" id="hero-floating-shapes" style="top:0;left:0;z-index:0;"></div>
  <div class="row justify-content-center align-items-center w-100" style="z-index:2;">
    <div class="col-lg-8 mx-auto">
      <h1 class="display-2 fw-bold mb-3 text-gradient hero-title">NoteSpark</h1>
      <p class="lead mb-4 hero-subtitle">Secure, offline-first Markdown note app. Fast, flexible, open-source. <span class="badge bg-warning text-dark ms-2">GPLv3</span></p>
      <div class="d-flex flex-wrap justify-content-center gap-3 mb-4 hero-btn">
        <a href="{{ url_for('notespark.download') }}" class="btn btn-lg btn-primary shadow">Download</a>
        <a href="{{ url_for('notespark.about') }}" class="btn btn-lg btn-outline-dark shadow">Know More</a>
        <a href="https://github.com/Lusan-sapkota/notespark" target="_blank" class="btn btn-lg btn-outline-secondary shadow">GitHub</a>
      </div>
      <div class="d-flex flex-wrap justify-content-center gap-2 mb-4 hero-badges">
        <span class="badge rounded-pill bg-primary">Markdown</span>
        <span class="badge rounded-pill bg-success">Offline-first</span>
        <span class="badge rounded-pill bg-info text-dark">Secure Vault (soon)</span>
        <span class="badge rounded-pill bg-secondary">JSON Import/Export</span>
      </div>
    </div>
  </div>
  <div class="scroll-indicator">
    <i class="fas fa-chevron-down"></i>
  </div>
</section>
{% endblock %}

{% block content %}
<!-- Features Section - 100vh with Screenshots Left, Video Right -->
<section class="container-fluid d-flex flex-column justify-content-center align-items-center min-vh-100 features-section position-relative" >
  <div class="floating-shapes position-absolute w-100 h-100" id="features-floating-shapes" style="top:0;left:0;z-index:0;"></div>
  <div class="container" style="z-index:2;">
    <h2 class="display-4 fw-bold mb-4 text-white text-center">Experience NoteSpark</h2>
    <p class="lead text-white mb-4">See how NoteSpark transforms your note-taking workflow with powerful features and an intuitive interface.</p>
    <div class="row align-items-center h-100">
      <div class="col-lg-6 mb-4 mb-lg-0">
 
        <!-- App Screenshots -->
        <div class="screenshots-container">
          <!-- Bootstrap Carousel for F1â€“F11 Screenshots -->
          <div id="featuresCarousel" class="carousel slide carousel-fade glass shadow-lg rounded-4" data-bs-ride="carousel" data-bs-touch="true" style="max-width:480px;">
            <div class="carousel-indicators">
              {% for i in range(11) %}
              <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="{{ i }}" {% if i == 0 %}class="active" aria-current="true"{% endif %} aria-label="Feature {{ i+1 }}"></button>
              {% endfor %}
            </div>
            <div class="carousel-inner">
              {% for i in range(1,12) %}
              <div class="carousel-item {% if i == 1 %}active{% endif %}">
                <img src="{{ url_for('notespark.static', filename='images/features/f' ~ i|string ~ '.png') }}" class="d-block img-fluid screenshot-img mx-auto rounded-4 shadow" alt="Feature F{{ i }} Screenshot" style="max-width:650px; max-height:550px; object-fit:cover; padding:12px; background:rgba(255,255,255,0.08);">
              </div>
              {% endfor %}
            </div>
            <button class="carousel-control-prev carousel-nav-btn" type="button" data-bs-target="#featuresCarousel" data-bs-slide="prev" style="display:block;">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next carousel-nav-btn" type="button" data-bs-target="#featuresCarousel" data-bs-slide="next" style="display:block;">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>
      
      <div class="col-lg-6">
        <!-- Demo Video -->
        <div class="demo-video-container">
          <h3 class="text-white mb-3">Watch NoteSpark in Action</h3>
          <div class="ratio ratio-16x9 rounded-4 shadow-lg demo-video-responsive">
            <video controls poster="/static/images/demo-poster.png" style="width:100%;height:100%;object-fit:cover;">
              <source src="/static/videos/demo.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          <div class="video-features mt-3">
            <div class="row g-2">
              <div class="col-6">
                <div class="feature-badge bg-primary text-white rounded-pill px-3 py-1">
                  ðŸ”’ Secure Vault (Coming Soon)
                </div>
              </div>
              <div class="col-6">
                <div class="feature-badge bg-success text-white rounded-pill px-3 py-1">
                  ðŸ”„ JSON Import/Export
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Download Section - 100vh -->
<section class="container-fluid d-flex flex-column justify-content-center align-items-center text-center min-vh-100 section-download position-relative" style="background: linear-gradient(120deg, #F8A21A 0%, #E4572E 100%);">
  <div class="floating-shapes position-absolute w-100 h-100" id="download-floating-shapes" style="top:0;left:0;z-index:0;"></div>
  <div class="row justify-content-center align-items-center w-100" style="z-index:2;">
    <div class="col-lg-8 mx-auto">
      <h2 class="display-4 fw-bold mb-4 text-white">Fast Downloads</h2>
      <p class="lead mb-4 text-white">Get the latest version directly from our site. No ads, no tracking, just pure performance and reliability.</p>
      <div class="download-platforms mb-4">
        <div class="row g-3 justify-content-center">
          <div class="col-auto">
          <div class="col-auto">
            <div class="platform-card bg-white rounded-3 p-3 shadow">
              <i class="fab fa-linux" style="font-size: 2rem; color: #fcc624;"></i>
              <p class="mb-0 mt-2 fw-bold">Android</p>
            </div>
          </div>
        </div>
      </div>
      <a class="btn btn-lg btn-light shadow-lg px-5 py-3" href="/download">
        <i class="fas fa-download me-2"></i>Download Now
      </a>
      <a class="btn btn-lg btn-light shadow-lg px-5 py-3" href="/download">
        <i class="fas fa-download me-2"></i>View Releases
      </a>
      <a class="btn btn-lg btn-light shadow-lg px-5 py-3" href="/download">
        <i class="fas fa-download me-2"></i>Use Sourceforge
      </a>
    </div>
  </div>
</section>

<!-- Documentation Section - 100vh -->
<section class="container-fluid d-flex flex-column justify-content-center align-items-center text-center min-vh-100 section-docs position-relative" style="background: linear-gradient(120deg, #222 0%, #434343 100%);">
  <div class="floating-shapes position-absolute w-100 h-100" id="docs-floating-shapes" style="top:0;left:0;z-index:0;"></div>
  <div class="row justify-content-center align-items-center w-100" style="z-index:2;">
    <div class="col-lg-8 mx-auto">
      <h2 class="display-4 fw-bold mb-4 text-white">Documentation</h2>
      <p class="lead mb-4 text-white">Learn how to use NoteSpark and explore advanced features to maximize your productivity and note-taking workflow.</p>
      <div class="docs-preview mb-4">
        <div class="row g-4 justify-content-center">
          <div class="col-md-4">
            <div class="docs-card bg-white rounded-3 p-4 shadow-lg">
              <i class="fas fa-rocket" style="font-size: 2rem; color: #E4572E;"></i>
              <h5 class="mt-3 fw-bold">Getting Started</h5>
              <p class="text-muted">Quick setup guide</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="docs-card bg-white rounded-3 p-4 shadow-lg">
              <i class="fas fa-cog" style="font-size: 2rem; color: #F8A21A;"></i>
              <h5 class="mt-3 fw-bold">Advanced Features</h5>
              <p class="text-muted">Power user tips</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="docs-card bg-white rounded-3 p-4 shadow-lg">
              <i class="fas fa-code" style="font-size: 2rem; color: #667eea;"></i>
              <h5 class="mt-3 fw-bold">API Reference</h5>
              <p class="text-muted">Developer resources</p>
            </div>
          </div>
        </div>
      </div>
      <a href="/docs" class="btn btn-lg btn-outline-light shadow-lg px-5 py-3">
        <i class="fas fa-book me-2"></i>Read the Docs
      </a>
    </div>
  </div>
</section>

<!-- Version History Section - 100vh -->
<section class="container-fluid d-flex flex-column justify-content-center align-items-center min-vh-100 releases-section position-relative" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
  <div class="floating-shapes position-absolute w-100 h-100" id="releases-floating-shapes" style="top:0;left:0;z-index:0;"></div>
  <div class="container" style="z-index:2;">
    <div class="text-center mb-5">
      <h2 class="display-4 fw-bold mb-4 text-white">Version History & Changelog</h2>
      <p class="lead text-white">Stay up to date with the latest improvements, bug fixes, and exciting new features.</p>
    </div>
    
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="timeline">
          <div class="timeline-item bg-white rounded-3 p-4 shadow-lg mb-4">
            <div class="timeline-marker bg-primary"></div>
            <h5 class="fw-bold text-primary">v2.1.0 - Latest</h5>
            <p class="text-muted mb-2">Released 2 weeks ago</p>
            <ul class="list-unstyled">
              <li>âœ¨ Enhanced Markdown rendering</li>
              <li>ðŸ”§ Bug fixes and performance improvements</li>
              <li>ðŸŽ¨ New themes and customization options</li>
            </ul>
          </div>
          <div class="timeline-item bg-white rounded-3 p-4 shadow-lg mb-4">
            <div class="timeline-marker bg-success"></div>
            <h5 class="fw-bold text-success">v2.0.0</h5>
            <p class="text-muted mb-2">Released 1 month ago</p>
            <ul class="list-unstyled">
              <li>ðŸš€ Major UI/UX overhaul</li>
              <li>ðŸ“± Mobile responsiveness improvements</li>
              <li>ðŸ”„ Better import/export functionality</li>
            </ul>
          </div>
        </div>
        <div class="text-center">
          <a href="/releases" class="btn btn-lg btn-outline-light shadow-lg px-5 py-3">
            <i class="fas fa-history me-2"></i>See All Releases
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

<style>
/* Global Styles */
.text-gradient {
  background: linear-gradient(45deg, #F8A21A, #E4572E);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Floating shapes */
.floating-shape {
  position: absolute;
  border-radius: 50%;
  background: linear-gradient(45deg, rgba(248, 162, 26, 0.3), rgba(228, 87, 46, 0.3));
  animation: float 8s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { 
    transform: translateY(0px) rotate(0deg); 
    opacity: 0.3;
  }
  50% { 
    transform: translateY(-30px) rotate(180deg); 
    opacity: 0.8;
  }
}

/* Scroll indicator */
.scroll-indicator {
  position: absolute;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  color: #E4572E;
  font-size: 2rem;
  animation: bounce 2s infinite;
  z-index: 2;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
  40% { transform: translateX(-50%) translateY(-10px); }
  60% { transform: translateX(-50%) translateY(-5px); }
}

/* Feature cards */
.feature-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.feature-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.1);
}

/* Platform cards */
.platform-card {
  transition: transform 0.3s ease;
}

.platform-card:hover {
  transform: scale(1.05);
}

/* Docs cards */
.docs-card {
  transition: transform 0.3s ease;
}

.docs-card:hover {
  transform: translateY(-5px);
}

/* Timeline */
.timeline {
  position: relative;
}

.timeline-item {
  position: relative;
  padding-left: 3rem;
}

.timeline-marker {
  position: absolute;
  left: -10px;
  top: 1rem;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 4px solid white;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: rgba(255,255,255,0.3);
}

/* Screenshot styles */

/* Carousel screenshot images */
.screenshot-img {
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-width: 320px;
  max-height: 200px;
  object-fit: cover;
  padding: 12px;
  background: rgba(255,255,255,0.08);
  box-shadow: 0 8px 32px rgba(0,0,0,0.18);
  border-radius: 1rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.screenshot-img:hover {
  transform: scale(1.05);
  box-shadow: 0 16px 48px rgba(0,0,0,0.22);
}

/* Video container */
.demo-video-container {
  transition: transform 0.3s ease;
}

.demo-video-container:hover {
  transform: scale(1.02);
}

.feature-badge {
  font-size: 0.85rem;
  text-align: center;
  display: block;
}

/* Particle effects */
.particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: #F8A21A;
  border-radius: 50%;
  pointer-events: none;
  animation: particles 10s linear infinite;
}

@keyframes particles {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100vh) rotate(360deg);
    opacity: 0;
  }
}

/* Responsive design */
@media (max-width: 768px) {
  .display-2 { font-size: 2.5rem; }
  .display-4 { font-size: 2rem; }
  .lead { font-size: 1.1rem; }
  
  .screenshot-item {
    margin-bottom: 2rem;
  }
  
  .timeline-item {
    padding-left: 2rem;
  }
  
  .timeline-marker {
    left: -8px;
  }
  
  .demo-video-responsive {
    max-width: 320px;
  }
  
  .carousel-nav-btn {
    width: 2.2rem;
    height: 2.2rem;
  }
}

/* Loading animation */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}

.loader {
  width: 60px;
  height: 60px;
  border: 4px solid #F8A21A;
  border-top: 4px solid #E4572E;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>

{% block scripts %}
<script>
// Floating shapes creation
function createFloatingShapes(containerId, count = 15) {
  const container = document.getElementById(containerId);
  if (!container) return;
  
  for (let i = 0; i < count; i++) {
    const shape = document.createElement('div');
    shape.className = 'floating-shape';
    shape.style.left = Math.random() * 100 + '%';
    shape.style.top = Math.random() * 100 + '%';
    shape.style.width = Math.random() * 40 + 20 + 'px';
    shape.style.height = shape.style.width;
    shape.style.animationDelay = Math.random() * 8 + 's';
    shape.style.animationDuration = Math.random() * 4 + 6 + 's';
    container.appendChild(shape);
  }
}

// Particle system
function createParticles() {
  setInterval(() => {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDuration = Math.random() * 3 + 7 + 's';
    document.body.appendChild(particle);
    
    setTimeout(() => {
      particle.remove();
    }, 10000);
  }, 500);
}

// Intersection Observer for animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('animate-in');
    }
  });
}, observerOptions);

// Smooth scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth'
      });
    }
  });
});

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  // Create floating shapes for each section
  createFloatingShapes('hero-floating-shapes', 12);
  createFloatingShapes('features-floating-shapes', 10);
  createFloatingShapes('key-features-floating-shapes', 8);
  createFloatingShapes('download-floating-shapes', 10);
  createFloatingShapes('docs-floating-shapes', 8);
  createFloatingShapes('releases-floating-shapes', 10);
  
  // Start particle system
  createParticles();
  
  // Observe sections for animations
  document.querySelectorAll('section').forEach(section => {
    observer.observe(section);
  });
  
  // Add scroll event for parallax effect
  window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const parallaxElements = document.querySelectorAll('.floating-shapes');
    
    parallaxElements.forEach(element => {
      const speed = 0.5;
      element.style.transform = `translateY(${scrolled * speed}px)`;
    });
  });
});

// Add CSS animations via JavaScript
const style = document.createElement('style');
style.textContent = `
  .animate-in {
    animation: fadeInUp 1s ease-out forwards;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .hero-title, .hero-subtitle, .hero-btn, .hero-badges {
    opacity: 0;
    animation: fadeInUp 1s ease-out forwards;
  }
  
  .hero-title { animation-delay: 0.2s; }
  .hero-subtitle { animation-delay: 0.4s; }
  .hero-btn { animation-delay: 0.6s; }
  .hero-badges { animation-delay: 0.8s; }
`;
document.head.appendChild(style);
</script>
{% endblock %}